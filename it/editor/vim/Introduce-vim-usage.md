<h1>How to use vim better</h1>

1. 常用的状态切换按键
```
a. Normal Mode -> Insert Mode
i 小写字母i，在光标位置插入
a 小写字母a，在光标的下一个位置插入
I 大写字母I，在光标所在行的第一个非空格处插入
A 大写字母A，在光标所在行的最后一个字符处插入
o 小写字母o，在光标所在行的下一行处插入新行
O 大写字母O，在光标所在行的上一行处插入新航
r 小写字母r，替换光标所在处的字符一次
R 大写字母R，持续替换光标所在处的字符，直到按下ESC

b. Normal Mode -> Command-line Mode
:w 保存文件
:w! 强制保存文件（前提是用户有修改文件访问权限的权限）
:q 退出缓冲区
:q! 强制退出缓冲区而不保存
:wq 保存文件并退出缓冲区
:wq! 强制保存文件并退出缓冲区（前提是用户有修改文件访问权限的权限）
:w 另存为名为filename文件
:n1,n2 w 将n1行到n2行的数据另存为名为filename文件
:x 如果文件有更改，则保存后退出。否则直接退出。

c. Insert Mode -> Normal Mode
按下ESC键

d. Command-line -> Normal Mode
按下ESC键
```

2. 光标跳转
```
a. 调整光标所在行在窗口中的显示位置（顶部，中间，底部）
顶部：zt
中间：zz
底部：zb

b. 函数及变量跳转
跳转到函数定义处：CTR + ]                                // Ctrl+w+] 横向打开一个窗口并跳转到函数定义处
跳转到局部变量定义处：gd                                 // 跳转到当前函数内标识符首次出现的位置
跳转到全局变量定义处：gD                                 // 跳转到当前文件内标识符首次出现的位置
跳转光标到上一次的位置：CTR + o/t  反向操作：CTR + i     // '' 跳转到光标上次停靠的地方, 是两个', 而不是一个"

c. 代码块跳转
[[: 跳转到当前或者上一代码块(函数定义、类定义等)的开头处(但要求代码块中'{'必须单独占一行)
][: 跳转到当前代码块(函数定义、类定义等)的结尾处(但要求代码块中'{'必须单独占一行)
]]: 跳转到下一代码块(函数定义、类定义等)的开头处(但要求代码块中'{'必须单独占一行)
[]: 跳转到上一个代码块(函数定义、类定义等)的结尾处(但要求代码块中'{'必须单独占一行)

[{: 跳转到当前块开始处
]}: 跳转到当前块结束处

d. 注释跳转
[/: 跳到注释开头（只对/* */注释有效）
]/: 跳到注释结尾（只对/* */注释有效）

e. 标签跳转
mx: 设置书签,x只能是a-z的26个字母
`x: 跳转到书签处("`"是1左边的键)

f. 光标字符操作
j: 向下
k: 向上
h: 向左
l: 向右
$: 光标移动到行尾（End），注意要按Shift键
0: 光标移动到行首（Home）
^: 光标移动到行首第一个非空白字符（Home），注意要按Shift键

g. 光标词操作
w: 光标移动到后一词的词首
W: 光标移动到后一词的词首且忽略标点符号
e: 光标移动到后一词的词尾
E: 光标移动到后一词的词尾且忽略标点符号
b: 光标移动到前一词的词首
B: 光标移动到前一词的词首且忽略标点符号

h. 光标句操作
): 光标移动到后一句的句首
(: 光标移动到前一句的句首
%: 配合“(”和“)”使用，寻找相匹配的另一半

i. 光标行操作
G: 光标移动到文档的最后一行的第一个非空白字符
nG: 光标移动到文档的第n行，相当于”:n”
gg: 光标移动到文档的第1行的第一个非空白字符，相当于”1G”，也相当于”:1″

j. 光标段操作
{: 光标移动到下一段的段首
}: 光标移动到上一段的段首
%: 配合“(”和“)”使用，寻找相匹配的另一半

k. 光标页操作
下一屏：CTR + f
上一屏：CTR + b
下半屏：CTR + d
上半屏：CTR + u
H: 光标移动到目前显示页的第一行
M: 光标移动到目前显示页的中间行
L: 光标移动到目前显示页的最后一行

l: 光标自由操作
Ctrl+o: 回到光标的上一位置

j: 跳转到修改处
g;: 光标移动到上一个修改过的地方
g,: 光标移动到下一个修改过的地方
```

3. 常用编辑操作按键
```
a. 删除操作（delete）
dd: 删除光标所在行
ndd: 删除从光标所在行开始，向下的n行
d1G: 删除从光标所在行开始，到第一行的所有行
dG: 删除从光标所在行开始，到最后一行的所有行
d$: 删除从光标所在位置，到行尾的所有字符
d0: 删除从光标所在位置，到行首的所有字符

b. 复制操作（yank）
yy: 复制光标所在行
nyy: 复制从光标所在行开始，向下的n行
y1G: 复制从光标所在行开始，到第一行的所有行
yG: 复制从光标所在行开始，到最后一行的所有行
y$: 复制从光标所在位置，到行尾的所有字符
y0: 复制从光标所在位置，到行首的所有字符

c. 粘贴操作（paste）
p: 小写字母p，粘贴剪贴板中的数据，从光标所在行的下一行开始   (p不仅可以复制行，只要d(删除),y(复制)操作的都可以粘贴)
P: 大写字母P，粘贴剪贴板中的数据，从光标所在行的上一行开始

d. 撤销与重做操作（undo，redo）
u: （Undo）撤销上一个操作
Ctrl+r: （Redo）重做上一个操作

e. 重复操作
.: 重复上一操作

f. 替换操作（replace）
r: 替换光标所在处字符
R: 进入替换模式，直至按ESC退出
cc: 替换光标所在行
C: 替换光标到行尾的字符
cw: 替换光标所在的英文单词
~: 转换大小写

g. 排版操作
:le 光标所在行左对齐
:ri 光标所在行右对齐
:ce 光标所在行居中

```

3. 对标点号内的内容进行快速操作
```
ci'、ci"、ci(、ci[、ci{、ci< - 分别更改这些配对标点符号中的文本内容
di'、di"、di(、di[、di{、di< - 分别删除这些配对标点符号中的文本内容
yi'、yi"、yi(、yi[、yi{、yi< - 分别复制这些配对标点符号中的文本内容
vi'、vi"、vi(、vi[、vi{、vi< - 分别选中这些配对标点符号中的文本内容

ca'、ca"、ca(、ca[、ca{、ca< - 分别更改这些配对标点符号中的文本内容,包含标点符号本身
da'、da"、da(、da[、da{、da< - 分别删除这些配对标点符号中的文本内容,包含标点符号本身
ya'、ya"、ya(、ya[、ya{、ya< - 分别复制这些配对标点符号中的文本内容,包含标点符号本身
va'、va"、va(、va[、va{、va< - 分别选中这些配对标点符号中的文本内容,包含标点符号本身
```

4. 多窗口操作(横向切割是上下分屏，纵向切割是左右分屏)
```
a. 打开多个窗口
横向切割窗口
:new+窗口名(保存后就是文件名) 
:split+窗口名，也可以简写为:sp+窗口名
纵向切割窗口名
:vsplit+窗口名，也可以简写为：vsp+窗口名
:sp/vsp 后面不加文件名，表示将当前文件再开一个窗口

b. 关闭多窗口
可以用：q!，也可以使用：close，最后一个窗口不能使用close关闭。使用close只是暂时关闭窗口，其内容还在缓存中，只有使用q!、w!或x才能真能退出。
:tabc 关闭当前窗口
:tabo 关闭所有窗口

c. 窗口切换
:ctrl+w+j/k，通过j/k可以上下切换
:ctrl+w加上下左右键，也可以通过快速双击ctrl+w依次切换窗口。

d. 窗口大小调整
纵向调整
:ctrl+w + 纵向扩大（行数增加）
:ctrl+w - 纵向缩小 （行数减少）
:res(ize) num  例如：:res 5，显示行数调整为5行
:res(ize)+num 把当前窗口高度增加num行
:res(ize)-num 把当前窗口高度减少num行
横向调整
:vertical res(ize) num 指定当前窗口为num列
:vertical res(ize)+num 把当前窗口增加num列
:vertical res(ize)-num 把当前窗口减少num列

e. 给窗口重命名
:f file

f. vi打开多文件
vi a b c
:n 跳至下一个文件，也可以直接指定要跳的文件，如:n c，可以直接跳到c文件
:e# 回到刚才编辑的文件

g. 文件浏览
:Ex 开启目录浏览器，可以浏览当前目录下的所有文件，并可以选择
:Ve 相比Ex会在水平方向分割一个窗口查看目录树。
:Sex 水平分割当前窗口，并在一个窗口中开启目录浏览器
:ls 显示当前buffer情况

h. vi与shell切换
:shell 可以在不关闭vi的情况下切换到shell命令行
:exit (或者Ctrl + D) 从shell回到vi

i. 移动窗口
Ctrl + w + r：向右或向下方交换窗口，而Ctrl + w + R则和它方向相反。
Ctrl + w + x：交换同列或同行的窗口的位置。vim默认交换当前窗口的与它下一个窗口的位置，如果下方没有窗口，则试着与上一个窗口交换位置。亦可在此命令前加上数量，与制定的窗口交换位置。
```

5. 全局替换
```
替换命令语法：

:[addr]s/源字符串/目标字符串/[option]
全局替换：

:%s/源字符串/目标字符串/g
参数说明：

[addr]——表示检索范围，省略时表示当前行。
"%"：表示整个文件，同"1,$"；
".,$"：从当前行到文件尾；
s：表示替换操作
[option]：表示操作类型
g：全局替换
c：表示进行确认
p：表示替换结果逐行显示（Ctrl+L恢复屏幕）
省略option：默认仅对每行第一个匹配串进行替换
如果在源字符串和目标字符串中有特殊字符，需要使用“\”转义
例子：:%s/CHIP_PLATFORM/PLATFORM_TYPE/g
```

6. 大小写转换
```
转换为小写：gu
转换为大写：gU
注意：后面还需加别的配合转换的范围。
单个字符大小写转换：~
```

7. 括号匹配
```
% 跳转到相配对的括号
```

8. 查找
```
a. 全匹配：
从上往下查找，比如“string” ：   /string
从下往上查找，比如“string” ：   ?string

b. 模糊匹配（正则表达式）
.通配1个字符 ，如 匹配 server, 可以用  /se...r
*通配多个字符，如 匹配 privilege，可以用 p*ge

c. 快速查找
Shift + * ：让光标停留在想要查找的单词的任意一个字母上面， 然后输入 Shift + * ，即可快速选中该单词，并且通过 n  或  N 进行上一个或下一个的匹配。
```

9. 折叠
```
a. 临时关闭折叠
:set foldcolumn=0
```

10. 内容拷贝、剪切，移动  
    10.1 剪切  
    快捷方式：  
```
dd：剪切光标所处当前行
n + dd：剪切光标所在行及以下共 n 行
按 p 粘贴在光标所在行
```
    命令行方式：
```
690, 695 m 700   (将第690到695行的内容移动到第701行)
```
    10.2 复制  
    快捷方式：
```
yy：复制光标所处当前行
n + yy：复制光标所在行及以下共 n 行
按 p 粘贴在光标所在行
```
    命令行方式：
```
1，10 co 12     (复制1到10行，并粘贴在12行处)
1, 10 y         (复制1到10行, 只复制)
```
    10.3 删除  
    快捷方式：
```
dd：删除光标所处当前行
n + dd：删除光标所在行及以下共 n 行
```
    命令行方式：
```
1，10 d         (删除1到10行)
```

11. 缩进
```
>>: (按两下>, 下同)增加缩进,"n>>"表示增加以下n行的缩进
<<: 减少缩进,"n<<"表示减少以下n行的缩进
=:  按照一定的规则自动调整缩进，"n="表示调整以下n行的缩进
```

12. 查看vim历史命令
```
q:               // 在normal模式下输入"q:"查看vim历史命令 （vimrc有可能需要设置“set showcmd”）
```

13. quickfix命令集
```
通过quickfix命令集，你可在 Vim 内编译程序并直接跳转到出错位置进行修正。你可以接着重新编译并做修正，直到不再出错为止。

帮助文档
:help usr_30
:help quickfix
下面的命令运行 "make" (包括你所给出的参数) 程序并捕捉其运行结果: >
 :make {arguments}
如果编译时出现错误，按 <Enter>，回到vim界面，看不到出错信息了！这时，可以运行以下命令
:cw[indow]
打开quickfix窗口来查看出错信息，它会自动跳到第一处出错的地方。然后，你可以双击出错某一条出错信息，vim就会自动跳转到相应的出错位置
:cn[ext]  光标移到下一个错误所在的行
:cp[revious] 光标移到上一个错误所在的行
:cfirst  到第一处错误
:clast  到最后一处错误
:cc   空间不够时，Vim 会缩短出错信息。如果你想查看详细信息，可以使用此命令
:cl[ist] 列出所有出错信息的概览（只有那些含有文件名或行数的错误信息会被显示，需要查看那些并不含文件名或行数的信息可用“:cl[ist]!”命令）
```

# 外部参考链接
[https://blog.csdn.net/daocaoren1543169565/article/details/53114347](https://blog.csdn.net/daocaoren1543169565/article/details/53114347)

[https://www.cnblogs.com/wyf0518/p/11450923.html](https://www.cnblogs.com/wyf0518/p/11450923.html)

[https://www.cnblogs.com/JamyWong/p/9759948.html](https://www.cnblogs.com/JamyWong/p/9759948.html)

[https://www.cnblogs.com/shanql/p/6048412.html](https://www.cnblogs.com/shanql/p/6048412.html)

[https://www.cnblogs.com/zhangsf/archive/2013/06/13/3134409.html](https://www.cnblogs.com/zhangsf/archive/2013/06/13/3134409.html)